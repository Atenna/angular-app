{"version":3,"sources":["components/SearchBox/SearchBox.tsx"],"names":[],"mappings":"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","file":"components/SearchBox/SearchBox.js","sourcesContent":["import * as React from 'react';\r\nimport { ISearchBoxProps } from './SearchBox.Props';\r\nimport {\r\n  BaseComponent,\r\n  autobind,\r\n  css,\r\n  getId,\r\n  elementContains,\r\n  getDocument,\r\n  KeyCodes\r\n} from '../../Utilities';\r\nimport './SearchBox.scss';\r\n\r\nexport interface ISearchBoxState {\r\n  value?: string;\r\n  hasFocus?: boolean;\r\n  id?: string;\r\n}\r\n\r\nexport class SearchBox extends BaseComponent<ISearchBoxProps, ISearchBoxState> {\r\n  public static defaultProps: ISearchBoxProps = {\r\n    labelText: 'Search',\r\n  };\r\n\r\n  private _rootElement: HTMLElement;\r\n  private _inputElement: HTMLInputElement;\r\n\r\n  public constructor(props: ISearchBoxProps) {\r\n    super(props);\r\n\r\n    // Handle deprecated prop\r\n    if (this.props.onChanged) {\r\n      this.props.onChange = this.props.onChanged;\r\n    }\r\n\r\n    this.state = {\r\n      value: props.value || '',\r\n      hasFocus: false,\r\n      id: getId('SearchBox')\r\n    };\r\n  }\r\n\r\n  public componentWillReceiveProps(newProps: ISearchBoxProps) {\r\n    if (newProps.value !== undefined) {\r\n      this.setState({\r\n        value: newProps.value\r\n      });\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    let { labelText, className } = this.props;\r\n    let { value, hasFocus, id } = this.state;\r\n\r\n    return (\r\n      <div\r\n        ref={ this._resolveRef('_rootElement') }\r\n        className={ css('ms-SearchBox', className, {\r\n          'is-active': hasFocus,\r\n          'can-clear': value.length > 0\r\n        }) }\r\n        { ...{ onFocusCapture: this._onFocusCapture } }\r\n        >\r\n        <i className='ms-SearchBox-icon ms-Icon ms-Icon--Search'></i>\r\n        <input\r\n          id={ id }\r\n          className='ms-SearchBox-field'\r\n          placeholder={ labelText }\r\n          onChange={ this._onInputChange }\r\n          onKeyDown={ this._onKeyDown }\r\n          value={ value }\r\n          ref={ this._resolveRef('_inputElement') }\r\n          />\r\n        <div\r\n          className='ms-SearchBox-clearButton'\r\n          onClick={ this._onClearClick }\r\n          >\r\n          <i className='ms-Icon ms-Icon--Clear' />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  @autobind\r\n  private _onClearClick(ev?: any) {\r\n    this.setState({\r\n      value: ''\r\n    });\r\n    this._callOnChange('');\r\n    ev.stopPropagation();\r\n    ev.preventDefault();\r\n\r\n    this._inputElement.focus();\r\n  }\r\n\r\n  @autobind\r\n  private _onFocusCapture(ev: React.FocusEvent<HTMLElement>) {\r\n    this.setState({\r\n      hasFocus: true\r\n    });\r\n\r\n    this._events.on(getDocument().body, 'focus', this._handleDocumentFocus, true);\r\n  }\r\n\r\n  @autobind\r\n  private _onKeyDown(ev: React.KeyboardEvent<HTMLInputElement>) {\r\n    switch (ev.which) {\r\n\r\n      case KeyCodes.escape:\r\n        this._onClearClick(ev);\r\n        break;\r\n\r\n      case KeyCodes.enter:\r\n        if (this.props.onSearch && this.state.value.length > 0) {\r\n          this.props.onSearch(this.state.value);\r\n        }\r\n        break;\r\n\r\n      default:\r\n        return;\r\n    }\r\n\r\n    // We only get here if the keypress has been handled.\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n  }\r\n\r\n  @autobind\r\n  private _onInputChange(ev: React.KeyboardEvent<HTMLInputElement>) {\r\n    this.setState({\r\n      value: this._inputElement.value\r\n    });\r\n    this._callOnChange(this._inputElement.value);\r\n  }\r\n\r\n  private _handleDocumentFocus(ev: FocusEvent) {\r\n    if (!elementContains(this._rootElement, ev.target as HTMLElement)) {\r\n      this._events.off(getDocument().body, 'focus');\r\n      this.setState({\r\n        hasFocus: false\r\n      });\r\n    }\r\n  }\r\n\r\n  private _callOnChange(newValue: string): void {\r\n    let { onChange } = this.props;\r\n\r\n    if (onChange) {\r\n      onChange(newValue);\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":"..\\..\\..\\src"}