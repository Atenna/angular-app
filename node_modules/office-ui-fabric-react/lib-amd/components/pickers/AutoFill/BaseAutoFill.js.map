{"version":3,"sources":["components/pickers/AutoFill/BaseAutoFill.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;IAWA,IAAM,iBAAiB,GAAG,SAAS,CAAC;IACpC,IAAM,kBAAkB,GAAG,UAAU,CAAC;IAEtC;QAAkC,gCAAqD;QAIrF,sBAAY,KAAyB;YACnC,kBAAM,KAAK,CAAC,CAAC;YACb,IAAI,CAAC,KAAK,GAAG;gBACX,KAAK,EAAE,EAAE;aACV,CAAC;QACJ,CAAC;QAED,sBAAW,wCAAc;iBAAzB;gBACE,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;oBACvB,IAAI,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC;oBACtC,EAAE,CAAC,CAAC,YAAY,CAAC,kBAAkB,KAAK,iBAAiB,CAAC,CAAC,CAAC;wBAC1D,MAAM,CAAC,YAAY,CAAC,YAAY,CAAC;oBACnC,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,MAAM,CAAC,YAAY,CAAC,cAAc,CAAC;oBACrC,CAAC;gBACH,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,MAAM,CAAC,CAAC,CAAC,CAAC;gBACZ,CAAC;YACH,CAAC;;;WAAA;QAED,sBAAW,yCAAe;iBAA1B;gBACE,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,cAAc,KAAK,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC;YAC7E,CAAC;;;WAAA;QAED,sBAAW,+BAAK;iBAAhB;gBACE,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;YAC1B,CAAC;;;WAAA;QAED,sBAAW,wCAAc;iBAAzB;gBACE,MAAM,CAAC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,cAAc,GAAG,CAAC,CAAC,CAAC;YACrE,CAAC;;;WAAA;QAED,sBAAW,sCAAY;iBAAvB;gBACE,MAAM,CAAC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC;YACnE,CAAC;;;WAAA;QAED,sBAAW,sCAAY;iBAAvB;gBACE,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC;YAC5B,CAAC;;;WAAA;QAEM,yCAAkB,GAAzB;YACQ,4BAAK,CAAgB;YACrB,4DAAqB,CAAgB;YAC3C,IAAI,eAAe,GAAG,CAAC,CAAC;YACxB,EAAE,CAAC,CAAC,KAAK,IAAI,qBAAqB,IAAI,IAAI,CAAC,kBAAkB,CAAC,qBAAqB,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;gBAC5F,OAAO,eAAe,GAAG,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC,eAAe,CAAC,CAAC,iBAAiB,EAAE,KAAK,qBAAqB,CAAC,eAAe,CAAC,CAAC,iBAAiB,EAAE,EAAE,CAAC;oBACnJ,eAAe,EAAE,CAAC;gBACpB,CAAC;gBACD,EAAE,CAAC,CAAC,eAAe,GAAG,CAAC,CAAC,CAAC,CAAC;oBACxB,IAAI,CAAC,aAAa,CAAC,iBAAiB,CAAC,eAAe,EAAE,qBAAqB,CAAC,MAAM,EAAE,kBAAkB,CAAC,CAAC;gBAC1G,CAAC;YACH,CAAC;QACH,CAAC;QAEM,6BAAM,GAAb;YAEI,4BAAK,CACQ;YAEb,4DAAqB,CACR;YACf,IAAI,YAAY,GAAG,KAAK,CAAC;YAEzB,EAAE,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,qBAAqB,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;gBAC1D,YAAY,GAAG,qBAAqB,CAAC;YACvC,CAAC;YAED,IAAM,WAAW,GAAG,2BAAc,CAAC,IAAI,CAAC,KAAK,EAAE,4BAAe,CAAC,CAAC;YAChE,MAAM,CAAC,qBAAC,KAAK,gBAAM,WAAW,GAC5B,GAAG,EAAG,IAAI,CAAC,WAAW,CAAC,eAAe,CAAG,EACzC,KAAK,EAAG,YAAc,EACtB,cAAc,EAAG,KAAO,EACxB,YAAY,EAAG,KAAO,EACtB,QAAQ,EAAG,IAAI,CAAC,SAAW,EAC3B,SAAS,EAAG,IAAI,CAAC,UAAY,GAC3B,CAAC;QACP,CAAC;QAEM,4BAAK,GAAZ;YACE,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;QAC7B,CAAC;QAEM,4BAAK,GAAZ;YACE,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;QACxB,CAAC;QAGO,iCAAU,GAAlB,UAAmB,EAAoC;YACrD,MAAM,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;gBACjB,KAAK,mBAAQ,CAAC,SAAS;oBACrB,IAAI,CAAC,gBAAgB,CAAC,EAAE,CAAC,CAAC;oBAC1B,KAAK,CAAC;YACV,CAAC;QACH,CAAC;QAEO,uCAAgB,GAAxB,UAAyB,EAAoC;YACrD,4BAAK,CAAgB;YAC3B,EAAE,CAAC,CAAC,KAAK,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBAC9B,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,EAAE,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACxD,4FAA4F;gBAC5F,mGAAmG;gBACnG,kFAAkF;gBAClF,EAAE,CAAC,cAAc,EAAE,CAAC;YACtB,CAAC;QACH,CAAC;QAGO,gCAAS,GAAjB,UAAkB,EAAgC;YAChD,IAAI,KAAK,GAAY,EAAE,CAAC,MAA2B,CAAC,KAAK,CAAC;YAC1D,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;QAC3B,CAAC;QAEO,yCAAkB,GAA1B,UAA2B,QAAgB;YACzC,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC,CAAC;gBAClC,IAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC;YAC1C,CAAC;QACH,CAAC;QAEO,mCAAY,GAApB,UAAqB,QAAgB;YAArC,iBAIC;YAHC,IAAI,CAAC,QAAQ,CAAC;gBACZ,KAAK,EAAE,QAAQ;aAChB,EAAE,cAAM,OAAA,KAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC,EAAjC,CAAiC,CAAC,CAAC;QAC9C,CAAC;QAEO,yCAAkB,GAA1B,UAA2B,IAAY,EAAE,SAAiB;YACxD,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;gBACxB,MAAM,CAAC,KAAK,CAAC;YACf,CAAC;YACD,MAAM,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC,OAAO,CAAC,SAAS,CAAC,iBAAiB,EAAE,CAAC,KAAK,CAAC,CAAC;QAC/E,CAAC;QA3CD;YAAC,mBAAQ;sDAAA;QAoBT;YAAC,mBAAQ;qDAAA;QAwBX,mBAAC;IAAD,CAtIA,AAsIC,CAtIiC,6BAAa,GAsI9C;IAtIY,oBAAY,eAsIxB,CAAA","file":"components/pickers/AutoFill/BaseAutoFill.js","sourcesContent":["import * as React from 'react';\r\nimport { IBaseAutoFillProps, IBaseAutoFill } from './BaseAutoFill.Props';\r\nimport { BaseComponent } from '../../../common/BaseComponent';\r\nimport { getNativeProps, inputProperties } from '../../../utilities/properties';\r\nimport { autobind } from '../../../utilities/autobind';\r\nimport { KeyCodes } from '../../../utilities/KeyCodes';\r\n\r\nexport interface IBaseAutoFillState {\r\n  value?: string;\r\n}\r\n\r\nconst SELECTION_FORWARD = 'forward';\r\nconst SELECTION_BACKWARD = 'backward';\r\n\r\nexport class BaseAutoFill extends BaseComponent<IBaseAutoFillProps, IBaseAutoFillState> implements IBaseAutoFill {\r\n\r\n  private _inputElement: HTMLInputElement;\r\n\r\n  constructor(props: IBaseAutoFillProps) {\r\n    super(props);\r\n    this.state = {\r\n      value: ''\r\n    };\r\n  }\r\n\r\n  public get cursorLocation(): number {\r\n    if (this._inputElement) {\r\n      let inputElement = this._inputElement;\r\n      if (inputElement.selectionDirection !== SELECTION_FORWARD) {\r\n        return inputElement.selectionEnd;\r\n      } else {\r\n        return inputElement.selectionStart;\r\n      }\r\n    } else {\r\n      return -1;\r\n    }\r\n  }\r\n\r\n  public get isValueSelected(): boolean {\r\n    return this.inputElement.selectionStart !== this.inputElement.selectionEnd;\r\n  }\r\n\r\n  public get value(): string {\r\n    return this.state.value;\r\n  }\r\n\r\n  public get selectionStart(): number {\r\n    return this._inputElement ? this._inputElement.selectionStart : -1;\r\n  }\r\n\r\n  public get selectionEnd(): number {\r\n    return this._inputElement ? this._inputElement.selectionEnd : -1;\r\n  }\r\n\r\n  public get inputElement(): HTMLInputElement {\r\n    return this._inputElement;\r\n  }\r\n\r\n  public componentDidUpdate() {\r\n    let { value } = this.state;\r\n    let { suggestedDisplayValue } = this.props;\r\n    let differenceIndex = 0;\r\n    if (value && suggestedDisplayValue && this._doesTextStartWith(suggestedDisplayValue, value)) {\r\n      while (differenceIndex < value.length && value[differenceIndex].toLocaleLowerCase() === suggestedDisplayValue[differenceIndex].toLocaleLowerCase()) {\r\n        differenceIndex++;\r\n      }\r\n      if (differenceIndex > 0) {\r\n        this._inputElement.setSelectionRange(differenceIndex, suggestedDisplayValue.length, SELECTION_BACKWARD);\r\n      }\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    let {\r\n      value\r\n    } = this.state;\r\n    let {\r\n      suggestedDisplayValue\r\n    } = this.props;\r\n    let displayValue = value;\r\n\r\n    if (this._doesTextStartWith(suggestedDisplayValue, value)) {\r\n      displayValue = suggestedDisplayValue;\r\n    }\r\n\r\n    const nativeProps = getNativeProps(this.props, inputProperties);\r\n    return <input { ...nativeProps}\r\n      ref={ this._resolveRef('_inputElement') }\r\n      value={ displayValue }\r\n      autoCapitalize={ 'off' }\r\n      autoComplete={ 'off' }\r\n      onChange={ this._onChange }\r\n      onKeyDown={ this._onKeyDown }\r\n      />;\r\n  }\r\n\r\n  public focus() {\r\n    this._inputElement.focus();\r\n  }\r\n\r\n  public clear() {\r\n    this._updateValue('');\r\n  }\r\n\r\n  @autobind\r\n  private _onKeyDown(ev: React.KeyboardEvent<HTMLElement>) {\r\n    switch (ev.which) {\r\n      case KeyCodes.backspace:\r\n        this._handleBackspace(ev);\r\n        break;\r\n    }\r\n  }\r\n\r\n  private _handleBackspace(ev: React.KeyboardEvent<HTMLElement>) {\r\n    let { value } = this.state;\r\n    if (value && value.length > 0) {\r\n      this._updateValue(value.substring(0, value.length - 1));\r\n      // Since this effectively deletes a letter from the string we need to preventDefault so that\r\n      // the backspace doesn't try to delete a letter that's already been deleted. If a letter is deleted\r\n      // it can trigger the onChange event again which can have unintended consequences.\r\n      ev.preventDefault();\r\n    }\r\n  }\r\n\r\n  @autobind\r\n  private _onChange(ev: React.FormEvent<HTMLElement>) {\r\n    let value: string = (ev.target as HTMLInputElement).value;\r\n    this._updateValue(value);\r\n  }\r\n\r\n  private _notifyInputChange(newValue: string) {\r\n    if (this.props.onInputValueChange) {\r\n      this.props.onInputValueChange(newValue);\r\n    }\r\n  }\r\n\r\n  private _updateValue(newValue: string) {\r\n    this.setState({\r\n      value: newValue\r\n    }, () => this._notifyInputChange(newValue));\r\n  }\r\n\r\n  private _doesTextStartWith(text: string, startWith: string) {\r\n    if (!text || !startWith) {\r\n      return false;\r\n    }\r\n    return text.toLocaleLowerCase().indexOf(startWith.toLocaleLowerCase()) === 0;\r\n  }\r\n}"],"sourceRoot":"..\\..\\..\\..\\src"}