{"version":3,"sources":["components/ChoiceGroup/ChoiceGroup.tsx"],"names":[],"mappings":"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","file":"components/ChoiceGroup/ChoiceGroup.js","sourcesContent":["import * as React from 'react';\r\nimport { Image } from '../../Image';\r\nimport { IChoiceGroupOption, IChoiceGroupProps } from './ChoiceGroup.Props';\r\nimport { css } from '../../utilities/css';\r\nimport { getId } from '../../utilities/object';\r\nimport './ChoiceGroup.scss';\r\n\r\nexport interface IChoiceGroupState {\r\n  keyChecked: string;\r\n\r\n  /** Is true when the control has focus. */\r\n  keyFocused?: string;\r\n}\r\n\r\nexport class ChoiceGroup extends React.Component<IChoiceGroupProps, IChoiceGroupState> {\r\n  public static defaultProps = {\r\n    options: []\r\n  };\r\n\r\n  private _id: string;\r\n  private _descriptionId: string;\r\n  private _inputElement: HTMLInputElement;\r\n\r\n  constructor(props: IChoiceGroupProps) {\r\n    super();\r\n\r\n    this.state = {\r\n      keyChecked: this._getKeyChecked(props.options),\r\n      keyFocused: undefined\r\n    };\r\n\r\n    this._id = getId('ChoiceGroup');\r\n    this._descriptionId = getId('ChoiceGroupDescription');\r\n  }\r\n\r\n  public componentWillReceiveProps(newProps: IChoiceGroupProps) {\r\n    const newKeyChecked: string = this._getKeyChecked(newProps.options);\r\n    const oldKeyCheched: string = this._getKeyChecked(this.props.options);\r\n\r\n    if (newKeyChecked !== oldKeyCheched) {\r\n      this.setState({\r\n        keyChecked: newKeyChecked,\r\n      });\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    let { label, options, className, required } = this.props;\r\n    let { keyChecked, keyFocused } = this.state;\r\n\r\n    const titleClassName = css('ms-Label', className, {\r\n      'is-required': required\r\n    });\r\n\r\n    return (\r\n      // Need to assign role application on containing div because JAWS doesnt call OnKeyDown without this role\r\n      <div role='application' className={ className }>\r\n        <div\r\n          className='ms-ChoiceFieldGroup'\r\n          role='radiogroup'\r\n          aria-labelledby={ this.props.label ? this._id + '-label' : '' }\r\n          >\r\n          <div className='ms-ChoiceFieldGroup-title'>\r\n            { this.props.label ? <label className={ titleClassName } id={ this._id + '-label' }>{ label }</label> : null }\r\n          </div>\r\n\r\n          { options.map((option) => (\r\n            <div\r\n              key={ option.key }\r\n              className={ css('ms-ChoiceField', {\r\n                'ms-ChoiceField--image': !!option.imageSrc,\r\n                'is-inFocus': option.key === keyFocused\r\n              })\r\n              }\r\n              >\r\n              <input\r\n                ref={ (c): HTMLInputElement => this._inputElement = c }\r\n                id={ `${this._id}-${option.key}` }\r\n                className='ms-ChoiceField-input'\r\n                type='radio'\r\n                name={ this._id }\r\n                disabled={ option.isDisabled || option.disabled || this.props.disabled }\r\n                checked={ option.key === keyChecked }\r\n                onChange={ this._onChange.bind(this, option) }\r\n                onFocus={ this._onFocus.bind(this, option) }\r\n                onBlur={ this._onBlur.bind(this, option) }\r\n                aria-describedby={ `${this._descriptionId}-${option.key}` }\r\n                />\r\n              { this._renderField(option) }\r\n            </div>\r\n          )) }\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  public focus() {\r\n    if (this._inputElement) {\r\n      this._inputElement.focus();\r\n    }\r\n  }\r\n\r\n  private _onFocus(option: IChoiceGroupOption, ev: React.FocusEvent<HTMLElement>): void {\r\n    this.setState({\r\n      keyFocused: option.key,\r\n      keyChecked: this.state.keyChecked\r\n    });\r\n  }\r\n\r\n  private _onBlur(option: IChoiceGroupOption, ev: React.FocusEvent<HTMLElement>): void {\r\n    this.setState({\r\n      keyFocused: undefined,\r\n      keyChecked: this.state.keyChecked\r\n    });\r\n  }\r\n\r\n  private _renderField(option: IChoiceGroupOption) {\r\n    const { keyChecked } = this.state;\r\n    let isDisabled = option.isDisabled || option.disabled || this.props.disabled;\r\n\r\n    return (\r\n      <label\r\n        htmlFor={ this._id + '-' + option.key }\r\n        className={ css({\r\n          'ms-ChoiceField-field--image': !!option.imageSrc,\r\n          'ms-ChoiceField-field': !option.imageSrc,\r\n          'is-checked': option.key === keyChecked,\r\n          'is-disabled': isDisabled\r\n        }) }\r\n        >\r\n        {\r\n          option.imageSrc\r\n            ? <div className='ms-ChoiceField-innerField'>\r\n              <div className={ css('ms-ChoiceField-imageWrapper', { 'is-hidden': option.key === keyChecked }) }>\r\n                <Image\r\n                  src={ option.imageSrc }\r\n                  width={ option.imageSize.width }\r\n                  height={ option.imageSize.height }\r\n                  />\r\n              </div>\r\n              <div className={ css('ms-ChoiceField-imageWrapper', { 'is-hidden': option.key !== keyChecked }) }>\r\n                <Image\r\n                  src={ option.selectedImageSrc }\r\n                  width={ option.imageSize.width }\r\n                  height={ option.imageSize.height }\r\n                  />\r\n              </div>\r\n            </div>\r\n            : null\r\n        }\r\n        {\r\n          option.imageSrc\r\n            ? <div className='ms-ChoiceField-labelWrapper'>\r\n              <i className='ms-ChoiceField-icon ms-Icon ms-Icon--CheckMark' />\r\n              <span id={ `${this._descriptionId}-${option.key}` } className='ms-Label'>{ option.text }</span>\r\n            </div>\r\n            : <span id={ `${this._descriptionId}-${option.key}` } className='ms-Label'>{ option.text }</span>\r\n        }\r\n      </label>\r\n    );\r\n  }\r\n\r\n  private _onChange(option: IChoiceGroupOption, evt: React.FormEvent<HTMLInputElement>) {\r\n    let { onChanged } = this.props;\r\n\r\n    this.setState({\r\n      keyChecked: option.key\r\n    });\r\n\r\n    if (onChanged) {\r\n      onChanged(option);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * If all the isChecked property of options are falsy values, return undefined;\r\n   * Else return the key of the first option with the truthy isChecked property.\r\n   */\r\n  private _getKeyChecked(options: IChoiceGroupOption[]): string {\r\n    const optionsChecked = options.filter((option: IChoiceGroupOption) => {\r\n      return option.isChecked || option.checked;\r\n    });\r\n\r\n    if (optionsChecked.length === 0) {\r\n      return undefined;\r\n    } else {\r\n      return optionsChecked[0].key;\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":"..\\..\\..\\src"}