{"version":3,"sources":["components/Breadcrumb/Breadcrumb.tsx"],"names":[],"mappings":"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","file":"components/Breadcrumb/Breadcrumb.js","sourcesContent":["import * as React from 'react';\r\nimport { BaseComponent } from '../../common/BaseComponent';\r\nimport { FocusZone, FocusZoneDirection } from '../../FocusZone';\r\nimport { ContextualMenu } from '../../ContextualMenu';\r\nimport { IBreadcrumbProps, IBreadcrumbItem } from './Breadcrumb.Props';\r\nimport { DirectionalHint } from '../../common/DirectionalHint';\r\nimport { getRTL } from '../../utilities/rtl';\r\nimport { getId } from '../../utilities/object';\r\nimport { css } from '../../utilities/css';\r\nimport { autobind } from '../../utilities/autobind';\r\nimport './Breadcrumb.scss';\r\n\r\nexport interface IBreadcrumbState {\r\n  isOverflowOpen: boolean;\r\n  overflowAnchor?: HTMLElement;\r\n  renderedItems?: IBreadcrumbItem[];\r\n  renderedOverflowItems?: IBreadcrumbItem[];\r\n}\r\n\r\nconst OVERFLOW_KEY = 'overflow';\r\nconst OVERFLOW_WIDTH = 44;\r\n\r\nexport class Breadcrumb extends BaseComponent<IBreadcrumbProps, IBreadcrumbState> {\r\n  public static defaultProps: IBreadcrumbProps = {\r\n    items: [],\r\n    maxDisplayedItems: 999\r\n  };\r\n\r\n  public refs: {\r\n    [key: string]: React.ReactInstance;\r\n    renderingArea: HTMLElement;\r\n  };\r\n\r\n  private _breadcrumbItemWidths: { [key: string]: number };\r\n  private _id: string;\r\n\r\n  constructor(props: IBreadcrumbProps) {\r\n    super(props);\r\n\r\n    this._id = getId('Breadcrumb');\r\n    this.state = this._getStateFromProps(props);\r\n  }\r\n\r\n  public componentDidMount() {\r\n    this._updateItemMeasurements();\r\n    this._updateRenderedItems();\r\n\r\n    this._events.on(window, 'resize', this._updateRenderedItems);\r\n  }\r\n\r\n  public componentWillReceiveProps(nextProps: IBreadcrumbProps) {\r\n    this.setState(this._getStateFromProps(nextProps));\r\n    this._breadcrumbItemWidths = null;\r\n  }\r\n\r\n  public componentDidUpdate(prevProps: IBreadcrumbProps, prevStates: IBreadcrumbState) {\r\n    if (!this._breadcrumbItemWidths) {\r\n      this._updateItemMeasurements();\r\n      this._updateRenderedItems();\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    let { className } = this.props;\r\n    let { isOverflowOpen, overflowAnchor, renderedItems, renderedOverflowItems } = this.state;\r\n    let overflowMenuId = this._id + '-overflow';\r\n\r\n    return (\r\n      <div className={ css('ms-Breadcrumb', className) } ref='renderingArea'>\r\n        <FocusZone direction={ FocusZoneDirection.horizontal }>\r\n          <ul className='ms-Breadcrumb-list'>\r\n            { renderedOverflowItems && renderedOverflowItems.length ? (\r\n              <li className='ms-Breadcrumb-overflow' key={ OVERFLOW_KEY } ref={ OVERFLOW_KEY }>\r\n                <div className='ms-Breadcrumb-overflowButton ms-Icon ms-Icon--More'\r\n                  onClick={ this._onOverflowClicked }\r\n                  data-is-focusable={ true }\r\n                  role='button'\r\n                  aria-haspopup='true'\r\n                  aria-owns={ isOverflowOpen ? overflowMenuId : null } />\r\n                <i className={ css('ms-Breadcrumb-chevron ms-Icon', getRTL() ? 'ms-Icon--ChevronLeft' : 'ms-Icon--ChevronRight') }></i>\r\n              </li>\r\n            ) : (null) }\r\n            { renderedItems.map(\r\n              (item, index) => (\r\n                <li className='ms-Breadcrumb-listItem' key={ item.key || String(index) } ref={ item.key || String(index) } >\r\n                  <a className='ms-Breadcrumb-itemLink'\r\n                    onClick={ item.onClick ? this._onBreadcrumbClicked.bind(this, item) : null }\r\n                    href={ item.href }\r\n                    role={ item.onClick ? 'button' : 'link' }>\r\n                    { item.text }\r\n                  </a>\r\n                  <i className={ css('ms-Breadcrumb-chevron ms-Icon', getRTL() ? 'ms-Icon--ChevronLeft' : 'ms-Icon--ChevronRight') }></i>\r\n                </li>\r\n              )) }\r\n          </ul>\r\n        </FocusZone>\r\n        { isOverflowOpen ? (\r\n          <ContextualMenu\r\n            targetElement={ overflowAnchor }\r\n            isBeakVisible={ true }\r\n            items={ renderedOverflowItems.map(\r\n              (item, index) => ({\r\n                name: item.text,\r\n                key: item.key,\r\n                onClick: this._onBreadcrumbClicked.bind(this, item),\r\n                href: item.href\r\n              })\r\n            ) }\r\n            id={ overflowMenuId }\r\n            directionalHint={ DirectionalHint.bottomLeftEdge }\r\n            onDismiss={ this._onOverflowDismissed } />\r\n        ) : (null) }\r\n      </div>\r\n    );\r\n  }\r\n\r\n  @autobind\r\n  private _onOverflowClicked(ev: React.MouseEvent<HTMLElement>) {\r\n    this.setState({\r\n      'isOverflowOpen': !this.state.isOverflowOpen,\r\n      'overflowAnchor': ev.currentTarget as HTMLElement\r\n    });\r\n  }\r\n\r\n  @autobind\r\n  private _onOverflowDismissed(ev: MouseEvent) {\r\n    this.setState({\r\n      'isOverflowOpen': false,\r\n      'overflowAnchor': null\r\n    });\r\n  }\r\n\r\n  @autobind\r\n  private _onBreadcrumbClicked(item: IBreadcrumbItem, ev: React.MouseEvent<HTMLElement>) {\r\n    if (item.onClick) {\r\n      item.onClick(ev, item);\r\n    }\r\n    this.setState({\r\n      'isOverflowOpen': false\r\n    });\r\n  }\r\n\r\n  private _updateItemMeasurements() {\r\n    let { items } = this.props;\r\n\r\n    if (!this._breadcrumbItemWidths) {\r\n      this._breadcrumbItemWidths = {};\r\n    }\r\n\r\n    for (let i = 0; i < items.length; i++) {\r\n      let item = items[i];\r\n\r\n      if (!this._breadcrumbItemWidths[item.key]) {\r\n        let el = this.refs[item.key] as HTMLElement;\r\n\r\n        this._breadcrumbItemWidths[item.key] = el.getBoundingClientRect().width;\r\n      }\r\n    }\r\n  }\r\n\r\n  private _updateRenderedItems() {\r\n    let { items, maxDisplayedItems } = this.props;\r\n    let renderingArea = this.refs.renderingArea;\r\n    let renderedItems = [];\r\n    let renderedOverflowItems = [].concat(items);\r\n    let consumedWidth = 0;\r\n\r\n    let style = window.getComputedStyle(renderingArea);\r\n    let availableWidth = renderingArea.clientWidth - parseInt(style.marginLeft, 10) - parseInt(style.marginRight, 10);\r\n\r\n    availableWidth -= OVERFLOW_WIDTH;\r\n\r\n    let i;\r\n    let minIndex = Math.max(0, renderedOverflowItems.length - maxDisplayedItems);\r\n\r\n    for (i = renderedOverflowItems.length - 1; i >= minIndex; i--) {\r\n      let item = renderedOverflowItems[i];\r\n      let itemWidth = this._breadcrumbItemWidths[item.key];\r\n\r\n      if ((consumedWidth + itemWidth) >= availableWidth) {\r\n        break;\r\n      } else {\r\n        consumedWidth += itemWidth;\r\n      }\r\n    }\r\n\r\n    renderedItems = renderedOverflowItems.splice(i + 1);\r\n\r\n    this.setState({\r\n      isOverflowOpen: this.state.isOverflowOpen,\r\n      overflowAnchor: this.state.overflowAnchor,\r\n      renderedItems: renderedItems,\r\n      renderedOverflowItems: renderedOverflowItems,\r\n    });\r\n  }\r\n\r\n  private _getStateFromProps(nextProps: IBreadcrumbProps) {\r\n    return {\r\n      isOverflowOpen: false,\r\n      overflowAnchor: null,\r\n      renderedItems: nextProps.items || [],\r\n      renderedOverflowItems: null\r\n    };\r\n  }\r\n\r\n}\r\n"],"sourceRoot":"..\\..\\..\\src"}