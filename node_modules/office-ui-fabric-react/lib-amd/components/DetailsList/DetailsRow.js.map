{"version":3,"sources":["components/DetailsList/DetailsRow.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;IAsDA,IAAM,0BAA0B,GAAG,aAAa,CAAC;IAEjD;QAAgC,8BAAmD;QAajF,oBAAY,KAAK;YACf,kBAAM,KAAK,CAAC,CAAC;YAEb,IAAI,CAAC,KAAK,GAAG;gBACX,cAAc,EAAE,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC;gBAC9C,iBAAiB,EAAE,IAAI;gBACvB,UAAU,EAAE,KAAK;gBACjB,iBAAiB,EAAE,KAAK,CAAC,iBAAiB;aAC3C,CAAC;YAEF,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;YAE1B,IAAI,CAAC,OAAO,GAAG,IAAI,uBAAU,CAAC,IAAI,CAAC,CAAC;YACpC,IAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC;YAC9B,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACnE,CAAC;QAEM,sCAAiB,GAAxB;YACQ,8CAAc,CAAgB;YACpC,EAAE,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;gBACnB,cAAc,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,sBAAsB,EAAE,CAAC,CAAC;YACxF,CAAC;YAED,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,6BAAgB,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;YAElF,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC;gBAC7C,+EAA+E;gBAC/E,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;gBACxB,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;YAC9B,CAAC;QACH,CAAC;QAEM,uCAAkB,GAAzB;YACE,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;YACvB,IAAA,eAAqC,EAA/B,cAAI,EAAE,0BAAU,CAAgB;YAChC,+CAAiB,CAAW;YAElC,EAAE,CAAC,CAAC,iBAAiB,IAAI,iBAAiB,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC;gBACtD,IAAI,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,qBAAqB,EAAE,CAAC,KAAK,CAAC;gBAEpE,iBAAiB,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;gBAE1C,IAAI,CAAC,QAAQ,CAAC;oBACZ,iBAAiB,EAAE,IAAI;iBACxB,CAAC,CAAC;YACL,CAAC;YAED,EAAE,CAAC,CAAC,IAAI,IAAI,UAAU,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;gBAC5C,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;gBACxB,UAAU,CAAC,IAAI,CAAC,CAAC;YACnB,CAAC;QACH,CAAC;QAEM,yCAAoB,GAA3B;YACE,IAAA,eAAwD,EAAlD,cAAI,EAAE,gCAAa,EAAE,kCAAc,CAAgB;YAEzD,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;YAEvB,2DAA2D;YAC3D,EAAE,CAAC,CAAC,aAAa,IAAI,IAAI,CAAC,CAAC,CAAC;gBAC1B,aAAa,CAAC,IAAI,CAAC,CAAC;YACtB,CAAC;YAED,EAAE,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;gBACnB,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;YAChE,CAAC;QACH,CAAC;QAEM,8CAAyB,GAAhC,UAAiC,QAA0B;YACzD,IAAI,CAAC,QAAQ,CAAC;gBACZ,cAAc,EAAE,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC;gBACjD,iBAAiB,EAAE,QAAQ,CAAC,iBAAiB;aAC9C,CAAC,CAAC;QACL,CAAC;QAEM,2BAAM,GAAb;YACE,IAAA,eAac,EAZZ,oBAAO,EACP,kCAAc,EACd,cAAI,EACJ,wBAAS,EACT,qBAAmC,EAAnC,wDAAmC,EACnC,0CAAkB,EAClB,gCAAa,EACb,sBAAQ,EACR,0CAAkB,EAClB,oCAAe,EACf,8CAAoB,EACpB,wBAAS,CACI;YACf,IAAA,eAAkH,EAA5G,sBAA2C,EAAzB,0BAAU,EAAE,4BAAW,EAAI,wCAAiB,EAAE,0BAAU,EAAE,wCAAiB,CAAgB;YACnH,IAAI,WAAW,GAAG,OAAO,CAAC,cAAc,IAAI,cAAc,CAAC,OAAO,IAAI,cAAc,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;YACpG,IAAI,iBAAiB,GAAG,UAAU,GAAG,CAAC,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,mBAAmB,GAAG,0BAA0B,CAAC,GAAG,EAAE,CAAC;YAC7H,IAAI,SAAS,GAAG,eAAe,GAAG,eAAe,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;YAC/D,IAAI,SAAS,GAAG,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;YAE9C,MAAM,CAAC,CACL,qBAAC,GAAG,IACF,GAAG,EAAC,MAAM,EACV,IAAI,EAAC,KAAK,GACV,UAAU,GAAG,SAAW,EACxB,SAAS,EAAG,SAAG,CAAC,8BAA8B,EAAE,iBAAiB,EAAE;gBACjE,aAAa,EAAE,UAAU;gBACzB,kBAAkB,EAAE,kBAAkB,KAAK,sCAAkB,CAAC,MAAM;aACrE,CAAG,GACJ,iBAAiB,GAAG,IAAM,GAC1B,oBAAoB,GAAG,SAAW,GAClC,eAAe,GAAG,SAAW,GAC7B,iBAAiB,GAAG,WAAa,GACjC,iBAAiB,GAAC,YAAY,EAC9B,KAAK,EAAG,EAAE,QAAQ,EAAE,QAAQ,GAAG,QAAQ,CAAC,KAAK,GAAG,CAAC,EAAI,GACrD,aAAa,GAAG,UAAY;gBAE5B,oBAAC,qBAAS,GAAC,SAAS,EAAG,8BAAkB,CAAC,UAAY;oBAClD,CAAC,aAAa,KAAK,0BAAa,CAAC,IAAI,IAAI,kBAAkB,KAAK,sCAAkB,CAAC,MAAM,CAAC,IAAI,CAC9F,qBAAC,IAAI,IAAC,IAAI,EAAC,UAAU,GACjB,aAAa,CAAC;wBACd,sBAAU;wBACV,wBAAW;wBACX,SAAS,EAAE,oBAAoB;wBAC/B,oBAAS;qBACV,CAAG,CACC,CACN;oBAED,yBAAW,CAAC,EAAE,KAAK,EAAE,iBAAiB,EAAE,CAAG;oBAE3C,IAAI,IAAI,CACR,oBAAC,mCAAgB,GACf,OAAO,EAAG,OAAS,EACnB,IAAI,EAAG,IAAM,EACb,SAAS,EAAG,SAAW,EACvB,kBAAkB,EAAG,kBAAoB,EAAG,CAC7C;oBAED,iBAAiB,IAAI,CACrB,qBAAC,IAAI,IAAC,SAAS,EAAC,+CAA+C,EAAC,GAAG,EAAC,cAAc;wBAChF,oBAAC,mCAAgB,GACf,OAAO,EAAG,CAAC,iBAAiB,CAAC,MAAM,CAAG,EACtC,IAAI,EAAG,IAAM,EACb,SAAS,EAAG,SAAW,EACvB,kBAAkB,EAAG,kBAAoB,EAAG;qBACzC,CACN,CACO;aACR,CACP,CAAC;QACJ,CAAC;QAED;;;;;WAKG;QACI,gCAAW,GAAlB,UAAmB,KAAa,EAAE,aAAsC;YACtE,IAAI,MAAM,GAAG,eAAM,CAAC,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAY,CAAC;YAE9D,MAAM,CAAC,QAAQ,GAAG,CAAC,CAAC;YACpB,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC;YAEzB,OAAO,MAAM,CAAC,eAAe,CAAC;YAE9B,IAAI,CAAC,QAAQ,CAAC;gBACZ,iBAAiB,EAAE;oBACjB,YAAK;oBACL,cAAM;oBACN,4BAAa;iBACd;aACF,CAAC,CAAC;QACL,CAAC;QAEM,0BAAK,GAAZ;YACE,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;gBAChC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAC5B,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;YACzB,CAAC;QACH,CAAC;QAES,mCAAc,GAAxB,UAAyB,KAA4B;YACnD,MAAM,CAAC,oBAAC,iCAAe,eAAM,KAAK,EAAK,CAAC;QAC1C,CAAC;QAEO,uCAAkB,GAA1B,UAA2B,KAAuB;YAC1C,+BAAS,EAAE,2BAAS,CAAW;YAErC,MAAM,CAAC;gBACL,UAAU,EAAE,SAAS,CAAC,eAAe,CAAC,SAAS,CAAC;gBAChD,WAAW,EAAE,SAAS,CAAC,gBAAgB,EAAE,GAAG,CAAC;aAC9C,CAAC;QACJ,CAAC;QAEO,wCAAmB,GAA3B;YACE,IAAI,cAAc,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAEzD,EAAE,CAAC,CAAC,CAAC,uBAAc,CAAC,cAAc,EAAE,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;gBAC/D,IAAI,CAAC,QAAQ,CAAC;oBACZ,cAAc,EAAE,cAAc;iBAC/B,CAAC,CAAC;YACL,CAAC;QACH,CAAC;QAEO,2CAAsB,GAA9B;YACE,IAAA,eAAsE,EAAhE,cAAI,EAAE,wBAAS,EAAE,kCAAc,EAAE,sCAAgB,CAAgB;YACvE,IAAI,CAAC,YAAY,GAAG,MAAM,GAAG,SAAS,CAAC;YACvC,IAAI,OAAO,GAAG;gBACZ,GAAG,EAAE,IAAI,CAAC,YAAY;gBACtB,QAAQ,EAAE,gBAAgB;gBAC1B,cAAc,EAAE,SAAS;gBACzB,OAAO,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,SAAS,EAAE;gBACzC,OAAO,EAAE,cAAc,CAAC,OAAO;gBAC/B,OAAO,EAAE,cAAc,CAAC,OAAO;gBAC/B,WAAW,EAAE,cAAc,CAAC,WAAW;gBACvC,eAAe,EAAE,IAAI,CAAC,oBAAoB;aAC3C,CAAC;YACF,MAAM,CAAC,OAAO,CAAC;QACjB,CAAC;QAED;;;;;;;;;;;WAWG;QACK,yCAAoB,GAA5B,UAA6B,QAAiB,EAAE,KAAgB;YAC9D,IAAA,eAA+C,EAAzC,kCAAc,EAAE,0BAAU,CAAgB;YAChD,IAAA,eAAyC,EAAnC,kCAAc,EAAE,cAAI,CAAgB;YAE1C,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACd,EAAE,CAAC,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC,CAAC;oBAC/B,cAAc,CAAC,WAAW,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;gBAC1C,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,EAAE,CAAC,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC,CAAC;oBAC/B,IAAI,CAAC,mBAAmB,GAAG,cAAc,CAAC,WAAW,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;gBACrE,CAAC;YACH,CAAC;YAED,EAAE,CAAC,CAAC,UAAU,KAAK,QAAQ,CAAC,CAAC,CAAC;gBAC5B,IAAI,CAAC,QAAQ,CAAC,EAAE,cAAc,EAAE,cAAc,EAAE,UAAU,EAAE,QAAQ,EAAE,CAAC,CAAC;YAC1E,CAAC;QACH,CAAC;QACH,iBAAC;IAAD,CArQA,AAqQC,CArQ+B,KAAK,CAAC,SAAS,GAqQ9C;IArQY,kBAAU,aAqQtB,CAAA","file":"components/DetailsList/DetailsRow.js","sourcesContent":["import * as React from 'react';\r\nimport { IColumn, CheckboxVisibility } from './DetailsList.Props';\r\nimport { DetailsRowCheck, IDetailsRowCheckProps } from './DetailsRowCheck';\r\nimport { GroupSpacer } from '../GroupedList/GroupSpacer';\r\nimport { DetailsRowFields } from './DetailsRowFields';\r\nimport { FocusZone, FocusZoneDirection } from '../../FocusZone';\r\nimport { ISelection, SelectionMode, SELECTION_CHANGE } from '../../utilities/selection/interfaces';\r\nimport { EventGroup } from '../../utilities/eventGroup/EventGroup';\r\nimport { shallowCompare, assign } from '../../utilities/object';\r\nimport { css } from '../../utilities/css';\r\nimport {\r\n  IDragDropHelper,\r\n  IDragDropEvents,\r\n  IDragDropOptions,\r\n} from './../../utilities/dragdrop/interfaces';\r\nimport { IViewport } from '../../utilities/decorators/withViewport';\r\nimport './DetailsRow.scss';\r\n\r\nexport interface IDetailsRowProps extends React.Props<DetailsRow> {\r\n  item: any;\r\n  itemIndex: number;\r\n  columns: IColumn[];\r\n  selectionMode: SelectionMode;\r\n  selection: ISelection;\r\n  eventsToRegister?: [{ eventName: string, callback: (item?: any, index?: number, event?: any) => void }];\r\n  onDidMount?: (row?: DetailsRow) => void;\r\n  onWillUnmount?: (row?: DetailsRow) => void;\r\n  onRenderCheck?: (props: IDetailsRowCheckProps) => JSX.Element;\r\n  onRenderItemColumn?: (item?: any, index?: number, column?: IColumn) => any;\r\n  dragDropEvents?: IDragDropEvents;\r\n  dragDropHelper?: IDragDropHelper;\r\n  groupNestingDepth?: number;\r\n  viewport?: IViewport;\r\n  checkboxVisibility?: CheckboxVisibility;\r\n  getRowAriaLabel?: (item: any) => string;\r\n  checkButtonAriaLabel?: string;\r\n}\r\n\r\nexport interface IDetailsRowSelectionState {\r\n  isSelected: boolean;\r\n  anySelected: boolean;\r\n}\r\n\r\nexport interface IDetailsRowState {\r\n  selectionState?: IDetailsRowSelectionState;\r\n  columnMeasureInfo?: {\r\n    index: number;\r\n    column: IColumn;\r\n    onMeasureDone: (measuredWidth: number) => void;\r\n  };\r\n  isDropping?: boolean;\r\n  groupNestingDepth?: number;\r\n}\r\n\r\nconst DEFAULT_DROPPING_CSS_CLASS = 'is-dropping';\r\n\r\nexport class DetailsRow extends React.Component<IDetailsRowProps, IDetailsRowState> {\r\n  public refs: {\r\n    [key: string]: React.ReactInstance,\r\n    root: HTMLElement,\r\n    cellMeasurer: HTMLElement\r\n  };\r\n\r\n  private _events: EventGroup;\r\n  private _hasSetFocus: boolean;\r\n  private _droppingClassNames: string;\r\n  private _hasMounted: boolean;\r\n  private _dragDropKey: string;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      selectionState: this._getSelectionState(props),\r\n      columnMeasureInfo: null,\r\n      isDropping: false,\r\n      groupNestingDepth: props.groupNestingDepth\r\n    };\r\n\r\n    this._hasSetFocus = false;\r\n\r\n    this._events = new EventGroup(this);\r\n    this._droppingClassNames = '';\r\n    this._updateDroppingState = this._updateDroppingState.bind(this);\r\n  }\r\n\r\n  public componentDidMount() {\r\n    let { dragDropHelper } = this.props;\r\n    if (dragDropHelper) {\r\n      dragDropHelper.subscribe(this.refs.root, this._events, this._getRowDragDropOptions());\r\n    }\r\n\r\n    this._events.on(this.props.selection, SELECTION_CHANGE, this._onSelectionChanged);\r\n\r\n    if (this.props.onDidMount && this.props.item) {\r\n      // If the item appears later, we should wait for it before calling this method.\r\n      this._hasMounted = true;\r\n      this.props.onDidMount(this);\r\n    }\r\n  }\r\n\r\n  public componentDidUpdate() {\r\n    let state = this.state;\r\n    let { item, onDidMount } = this.props;\r\n    let { columnMeasureInfo } = state;\r\n\r\n    if (columnMeasureInfo && columnMeasureInfo.index >= 0) {\r\n      let newWidth = this.refs.cellMeasurer.getBoundingClientRect().width;\r\n\r\n      columnMeasureInfo.onMeasureDone(newWidth);\r\n\r\n      this.setState({\r\n        columnMeasureInfo: null\r\n      });\r\n    }\r\n\r\n    if (item && onDidMount && !this._hasMounted) {\r\n      this._hasMounted = true;\r\n      onDidMount(this);\r\n    }\r\n  }\r\n\r\n  public componentWillUnmount() {\r\n    let { item, onWillUnmount, dragDropHelper } = this.props;\r\n\r\n    this._events.dispose();\r\n\r\n    // Only call the onWillUnmount callback if we have an item.\r\n    if (onWillUnmount && item) {\r\n      onWillUnmount(this);\r\n    }\r\n\r\n    if (dragDropHelper) {\r\n      dragDropHelper.unsubscribe(this.refs.root, this._dragDropKey);\r\n    }\r\n  }\r\n\r\n  public componentWillReceiveProps(newProps: IDetailsRowProps) {\r\n    this.setState({\r\n      selectionState: this._getSelectionState(newProps),\r\n      groupNestingDepth: newProps.groupNestingDepth\r\n    });\r\n  }\r\n\r\n  public render() {\r\n    let {\r\n      columns,\r\n      dragDropEvents,\r\n      item,\r\n      itemIndex,\r\n      onRenderCheck = this._onRenderCheck,\r\n      onRenderItemColumn,\r\n      selectionMode,\r\n      viewport,\r\n      checkboxVisibility,\r\n      getRowAriaLabel,\r\n      checkButtonAriaLabel,\r\n      selection\r\n    } = this.props;\r\n    let { selectionState: { isSelected, anySelected }, columnMeasureInfo, isDropping, groupNestingDepth } = this.state;\r\n    let isDraggable = Boolean(dragDropEvents && dragDropEvents.canDrag && dragDropEvents.canDrag(item));\r\n    let droppingClassName = isDropping ? (this._droppingClassNames ? this._droppingClassNames : DEFAULT_DROPPING_CSS_CLASS) : '';\r\n    let ariaLabel = getRowAriaLabel ? getRowAriaLabel(item) : null;\r\n    let canSelect = selection.canSelectItem(item);\r\n\r\n    return (\r\n      <div\r\n        ref='root'\r\n        role='row'\r\n        aria-label={ ariaLabel }\r\n        className={ css('ms-DetailsRow ms-u-fadeIn400', droppingClassName, {\r\n          'is-selected': isSelected,\r\n          'is-check-visible': checkboxVisibility === CheckboxVisibility.always\r\n        }) }\r\n        data-is-focusable={ true }\r\n        data-selection-index={ itemIndex }\r\n        data-item-index={ itemIndex }\r\n        data-is-draggable={ isDraggable }\r\n        data-automationid='DetailsRow'\r\n        style={ { minWidth: viewport ? viewport.width : 0 } }\r\n        aria-selected={ isSelected }\r\n        >\r\n        <FocusZone direction={ FocusZoneDirection.horizontal }>\r\n          { (selectionMode !== SelectionMode.none && checkboxVisibility !== CheckboxVisibility.hidden) && (\r\n            <span role='gridcell'>\r\n              { onRenderCheck({\r\n                isSelected,\r\n                anySelected,\r\n                ariaLabel: checkButtonAriaLabel,\r\n                canSelect\r\n              }) }\r\n            </span>\r\n          ) }\r\n\r\n          { GroupSpacer({ count: groupNestingDepth }) }\r\n\r\n          { item && (\r\n            <DetailsRowFields\r\n              columns={ columns }\r\n              item={ item }\r\n              itemIndex={ itemIndex }\r\n              onRenderItemColumn={ onRenderItemColumn } />\r\n          ) }\r\n\r\n          { columnMeasureInfo && (\r\n            <span className='ms-DetailsRow-cellMeasurer ms-DetailsRow-cell' ref='cellMeasurer'>\r\n              <DetailsRowFields\r\n                columns={ [columnMeasureInfo.column] }\r\n                item={ item }\r\n                itemIndex={ itemIndex }\r\n                onRenderItemColumn={ onRenderItemColumn } />\r\n            </span>\r\n          ) }\r\n        </FocusZone>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  /**\r\n   * measure cell at index. and call the call back with the measured cell width when finish measure\r\n   *\r\n   * @param {number} index (the cell index)\r\n   * @param {(width: number) => void} onMeasureDone (the call back function when finish measure)\r\n   */\r\n  public measureCell(index: number, onMeasureDone: (width: number) => void) {\r\n    let column = assign({}, this.props.columns[index]) as IColumn;\r\n\r\n    column.minWidth = 0;\r\n    column.maxWidth = 999999;\r\n\r\n    delete column.calculatedWidth;\r\n\r\n    this.setState({\r\n      columnMeasureInfo: {\r\n        index,\r\n        column,\r\n        onMeasureDone\r\n      }\r\n    });\r\n  }\r\n\r\n  public focus() {\r\n    if (this.refs && this.refs.root) {\r\n      this.refs.root.tabIndex = 0;\r\n      this.refs.root.focus();\r\n    }\r\n  }\r\n\r\n  protected _onRenderCheck(props: IDetailsRowCheckProps) {\r\n    return <DetailsRowCheck { ...props } />;\r\n  }\r\n\r\n  private _getSelectionState(props: IDetailsRowProps): IDetailsRowSelectionState {\r\n    let { itemIndex, selection } = props;\r\n\r\n    return {\r\n      isSelected: selection.isIndexSelected(itemIndex),\r\n      anySelected: selection.getSelectedCount() > 0\r\n    };\r\n  }\r\n\r\n  private _onSelectionChanged() {\r\n    let selectionState = this._getSelectionState(this.props);\r\n\r\n    if (!shallowCompare(selectionState, this.state.selectionState)) {\r\n      this.setState({\r\n        selectionState: selectionState\r\n      });\r\n    }\r\n  }\r\n\r\n  private _getRowDragDropOptions(): IDragDropOptions {\r\n    let { item, itemIndex, dragDropEvents, eventsToRegister } = this.props;\r\n    this._dragDropKey = 'row-' + itemIndex;\r\n    let options = {\r\n      key: this._dragDropKey,\r\n      eventMap: eventsToRegister,\r\n      selectionIndex: itemIndex,\r\n      context: { data: item, index: itemIndex },\r\n      canDrag: dragDropEvents.canDrag,\r\n      canDrop: dragDropEvents.canDrop,\r\n      onDragStart: dragDropEvents.onDragStart,\r\n      updateDropState: this._updateDroppingState\r\n    };\r\n    return options;\r\n  }\r\n\r\n  /**\r\n   * update isDropping state based on the input value, which is used to change style during drag and drop\r\n   *\r\n   * when change to true, that means drag enter. we will add default dropping class name\r\n   * or the custom dropping class name (return result from onDragEnter) to the root elemet.\r\n   *\r\n   * when change to false, that means drag leave. we will remove the dropping class name from root element.\r\n   *\r\n   * @private\r\n   * @param {boolean} newValue (new isDropping state value)\r\n   * @param {DragEvent} event (the event trigger dropping state change which can be dragenter, dragleave etc)\r\n   */\r\n  private _updateDroppingState(newValue: boolean, event: DragEvent) {\r\n    let { selectionState, isDropping } = this.state;\r\n    let { dragDropEvents, item } = this.props;\r\n\r\n    if (!newValue) {\r\n      if (dragDropEvents.onDragLeave) {\r\n        dragDropEvents.onDragLeave(item, event);\r\n      }\r\n    } else {\r\n      if (dragDropEvents.onDragEnter) {\r\n        this._droppingClassNames = dragDropEvents.onDragEnter(item, event);\r\n      }\r\n    }\r\n\r\n    if (isDropping !== newValue) {\r\n      this.setState({ selectionState: selectionState, isDropping: newValue });\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":"..\\..\\..\\src"}