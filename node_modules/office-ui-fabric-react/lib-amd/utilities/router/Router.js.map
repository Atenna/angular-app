{"version":3,"sources":["utilities/router/Router.tsx"],"names":[],"mappings":"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","file":"utilities/router/Router.js","sourcesContent":["import * as React from 'react';\r\nimport { EventGroup } from '../eventGroup/EventGroup';\r\n\r\nexport interface IRouterProps {\r\n  replaceState?: boolean;\r\n  children?: React.ReactElement<any>[];\r\n  onNewRouteLoaded?: () => void;\r\n}\r\n\r\nexport interface IRouterState {\r\n  path: string;\r\n}\r\n\r\nexport class Router extends React.Component<IRouterProps, IRouterState> {\r\n  private _events: EventGroup;\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this.state = {\r\n      path: location.hash\r\n    };\r\n    this._events = new EventGroup(this);\r\n  }\r\n\r\n  public componentDidUpdate(prevProps: IRouterProps, prevState: IRouterState) {\r\n\r\n    if (this.state.path !== prevState.path) {\r\n      window.scrollTo(0, 0);\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    return _getComponent(this.state.path, this.props.children);\r\n  }\r\n\r\n  public componentDidMount() {\r\n    this._events.on(window, 'hashchange', () => {\r\n      if (this.state.path !== location.hash) {\r\n        this.setState({ path: location.hash }, () => {\r\n          if (this.props.onNewRouteLoaded) {\r\n            this.props.onNewRouteLoaded();\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    if (this.props.onNewRouteLoaded) {\r\n      this.props.onNewRouteLoaded();\r\n    }\r\n  }\r\n\r\n  public componentWillUnmount() {\r\n    this._events.dispose();\r\n  }\r\n}\r\n\r\nfunction _getComponent(matchPath, children) {\r\n  let path = matchPath;\r\n  if (children && children.$$typeof) {\r\n    children = [ children ];\r\n  }\r\n\r\n  // Check if an in page anchor link was passed to the Url #/example/route#inPageAnchorLink\r\n  if (_hasAnchorLink(path)) {\r\n    // Extract the base path #/example/route - #inPageAnchorLink\r\n    path = _extractRoute(path);\r\n  }\r\n\r\n  for (let i = 0; children && i < children.length; i++) {\r\n    let currentChild = children[i];\r\n\r\n    if (_match(path, currentChild)) {\r\n      let component = currentChild.props.component;\r\n      let childComponent = _getComponent(path, currentChild.props.children);\r\n\r\n      return React.createElement(component, null, childComponent);\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction _hasAnchorLink(path) {\r\n  return (path.match(/#/g) || []).length > 1;\r\n}\r\n\r\n/*\r\n  Extract the route from the URL minus the in page anchor link\r\n  Example URL #/example/route#inPageAnchorLink\r\n  Returns #/example/route\r\n*/\r\nfunction _extractRoute(path) {\r\n  let index = path.lastIndexOf('#');\r\n  if (index >= 0) {\r\n    path = path.substr(0, index);\r\n  }\r\n  return path;\r\n}\r\n\r\nfunction _match(currentPath, child): boolean {\r\n  if (child.props) {\r\n    let { path } = child.props;\r\n\r\n    path = path || '';\r\n    currentPath = currentPath || '';\r\n\r\n    return (\r\n      (!path) ||\r\n      (path.toLowerCase() === currentPath.toLowerCase())\r\n    );\r\n  }\r\n\r\n  return false;\r\n}\r\n"],"sourceRoot":"..\\..\\..\\src"}