{"version":3,"sources":["components/Breadcrumb/Breadcrumb.tsx"],"names":[],"mappings":"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","file":"components/Breadcrumb/Breadcrumb.js","sourcesContent":["import * as React from 'react';\r\nimport { BaseComponent } from '../../common/BaseComponent';\r\nimport { FocusZone, FocusZoneDirection } from '../../FocusZone';\r\nimport { ContextualMenu } from '../../ContextualMenu';\r\nimport { IBreadcrumbProps, IBreadcrumbItem } from './Breadcrumb.Props';\r\nimport { DirectionalHint } from '../../common/DirectionalHint';\r\nimport { getRTL } from '../../utilities/rtl';\r\nimport { getId } from '../../utilities/object';\r\nimport { css } from '../../utilities/css';\r\nimport { autobind } from '../../utilities/autobind';\r\nimport './Breadcrumb.scss';\r\n\r\nexport interface IBreadcrumbState {\r\n  isOverflowOpen: boolean;\r\n  overflowAnchor?: HTMLElement;\r\n  renderedItems?: IBreadcrumbItem[];\r\n  renderedOverflowItems?: IBreadcrumbItem[];\r\n}\r\n\r\nconst OVERFLOW_KEY = 'overflow';\r\nconst OVERFLOW_WIDTH = 44;\r\n\r\nexport class Breadcrumb extends BaseComponent<IBreadcrumbProps, IBreadcrumbState> {\r\n  public static defaultProps: IBreadcrumbProps = {\r\n    items: [],\r\n    maxDisplayedItems: 999\r\n  };\r\n\r\n  public refs: {\r\n    [key: string]: React.ReactInstance;\r\n    renderingArea: HTMLElement;\r\n  };\r\n\r\n  private _breadcrumbItemWidths: { [key: string]: number };\r\n  private _id: string;\r\n\r\n  constructor(props: IBreadcrumbProps) {\r\n    super(props);\r\n\r\n    this._id = getId('Breadcrumb');\r\n    this.state = this._getStateFromProps(props);\r\n  }\r\n\r\n  public componentDidMount() {\r\n    this._updateItemMeasurements();\r\n    this._updateRenderedItems();\r\n\r\n    this._events.on(window, 'resize', this._updateRenderedItems);\r\n  }\r\n\r\n  public componentWillReceiveProps(nextProps: IBreadcrumbProps) {\r\n    this.setState(this._getStateFromProps(nextProps));\r\n    this._breadcrumbItemWidths = null;\r\n  }\r\n\r\n  public componentDidUpdate(prevProps: IBreadcrumbProps, prevStates: IBreadcrumbState) {\r\n    if (!this._breadcrumbItemWidths) {\r\n      this._updateItemMeasurements();\r\n      this._updateRenderedItems();\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    let { className } = this.props;\r\n    let { isOverflowOpen, overflowAnchor, renderedItems, renderedOverflowItems } = this.state;\r\n    let overflowMenuId = this._id + '-overflow';\r\n\r\n    return (\r\n      <div className={ css('ms-Breadcrumb', className) } ref='renderingArea'>\r\n        <FocusZone direction={ FocusZoneDirection.horizontal }>\r\n          <ul className='ms-Breadcrumb-list'>\r\n            { renderedOverflowItems && renderedOverflowItems.length ? (\r\n              <li className='ms-Breadcrumb-overflow' key={ OVERFLOW_KEY } ref={ OVERFLOW_KEY }>\r\n                <div className='ms-Breadcrumb-overflowButton ms-Icon ms-Icon--More'\r\n                  onClick={ this._onOverflowClicked }\r\n                  data-is-focusable={ true }\r\n                  role='button'\r\n                  aria-haspopup='true'\r\n                  aria-owns={ isOverflowOpen ? overflowMenuId : null } />\r\n                <i className={ css('ms-Breadcrumb-chevron ms-Icon', getRTL() ? 'ms-Icon--ChevronLeft' : 'ms-Icon--ChevronRight') }></i>\r\n              </li>\r\n            ) : (null) }\r\n            { renderedItems.map(\r\n              (item, index) => (\r\n                <li className='ms-Breadcrumb-listItem' key={ item.key || String(index) } ref={ item.key || String(index) } >\r\n                  <a className='ms-Breadcrumb-itemLink'\r\n                    onClick={ item.onClick ? this._onBreadcrumbClicked.bind(this, item) : null }\r\n                    href={ item.href }\r\n                    role={ item.onClick ? 'button' : 'link' }>\r\n                    { item.text }\r\n                  </a>\r\n                  <i className={ css('ms-Breadcrumb-chevron ms-Icon', getRTL() ? 'ms-Icon--ChevronLeft' : 'ms-Icon--ChevronRight') }></i>\r\n                </li>\r\n              )) }\r\n          </ul>\r\n        </FocusZone>\r\n        { isOverflowOpen ? (\r\n          <ContextualMenu\r\n            targetElement={ overflowAnchor }\r\n            isBeakVisible={ true }\r\n            items={ renderedOverflowItems.map(\r\n              (item, index) => ({\r\n                name: item.text,\r\n                key: item.key,\r\n                onClick: this._onBreadcrumbClicked.bind(this, item),\r\n                href: item.href\r\n              })\r\n            ) }\r\n            id={ overflowMenuId }\r\n            directionalHint={ DirectionalHint.bottomLeftEdge }\r\n            onDismiss={ this._onOverflowDismissed } />\r\n        ) : (null) }\r\n      </div>\r\n    );\r\n  }\r\n\r\n  @autobind\r\n  private _onOverflowClicked(ev: React.MouseEvent<HTMLElement>) {\r\n    this.setState({\r\n      'isOverflowOpen': !this.state.isOverflowOpen,\r\n      'overflowAnchor': ev.currentTarget as HTMLElement\r\n    });\r\n  }\r\n\r\n  @autobind\r\n  private _onOverflowDismissed(ev: MouseEvent) {\r\n    this.setState({\r\n      'isOverflowOpen': false,\r\n      'overflowAnchor': null\r\n    });\r\n  }\r\n\r\n  @autobind\r\n  private _onBreadcrumbClicked(item: IBreadcrumbItem, ev: React.MouseEvent<HTMLElement>) {\r\n    if (item.onClick) {\r\n      item.onClick(ev, item);\r\n    }\r\n    this.setState({\r\n      'isOverflowOpen': false\r\n    });\r\n  }\r\n\r\n  private _updateItemMeasurements() {\r\n    let { items } = this.props;\r\n\r\n    if (!this._breadcrumbItemWidths) {\r\n      this._breadcrumbItemWidths = {};\r\n    }\r\n\r\n    for (let i = 0; i < items.length; i++) {\r\n      let item = items[i];\r\n\r\n      if (!this._breadcrumbItemWidths[item.key]) {\r\n        let el = this.refs[item.key] as HTMLElement;\r\n\r\n        this._breadcrumbItemWidths[item.key] = el.getBoundingClientRect().width;\r\n      }\r\n    }\r\n  }\r\n\r\n  private _updateRenderedItems() {\r\n    let { items, maxDisplayedItems } = this.props;\r\n    let renderingArea = this.refs.renderingArea;\r\n    let renderedItems = [];\r\n    let renderedOverflowItems = [].concat(items);\r\n    let consumedWidth = 0;\r\n\r\n    let style = window.getComputedStyle(renderingArea);\r\n    let availableWidth = renderingArea.clientWidth - parseInt(style.marginLeft, 10) - parseInt(style.marginRight, 10);\r\n\r\n    availableWidth -= OVERFLOW_WIDTH;\r\n\r\n    let i;\r\n    let minIndex = Math.max(0, renderedOverflowItems.length - maxDisplayedItems);\r\n\r\n    for (i = renderedOverflowItems.length - 1; i >= minIndex; i--) {\r\n      let item = renderedOverflowItems[i];\r\n      let itemWidth = this._breadcrumbItemWidths[item.key];\r\n\r\n      if ((consumedWidth + itemWidth) >= availableWidth) {\r\n        break;\r\n      } else {\r\n        consumedWidth += itemWidth;\r\n      }\r\n    }\r\n\r\n    renderedItems = renderedOverflowItems.splice(i + 1);\r\n\r\n    this.setState({\r\n      isOverflowOpen: this.state.isOverflowOpen,\r\n      overflowAnchor: this.state.overflowAnchor,\r\n      renderedItems: renderedItems,\r\n      renderedOverflowItems: renderedOverflowItems,\r\n    });\r\n  }\r\n\r\n  private _getStateFromProps(nextProps: IBreadcrumbProps) {\r\n    return {\r\n      isOverflowOpen: false,\r\n      overflowAnchor: null,\r\n      renderedItems: nextProps.items || [],\r\n      renderedOverflowItems: null\r\n    };\r\n  }\r\n\r\n}\r\n"],"sourceRoot":"..\\..\\..\\src"}