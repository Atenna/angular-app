{"version":3,"sources":["components/TextField/TextField.test.tsx"],"names":[],"mappings":"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","file":"components/TextField/TextField.test.js","sourcesContent":["import 'es6-promise';\r\nimport * as React from 'react';\r\nimport * as ReactDOM from 'react-dom';\r\nimport * as ReactTestUtils from 'react-addons-test-utils';\r\n\r\nimport { TextField } from './TextField';\r\n\r\nconst expect: Chai.ExpectStatic = chai.expect;\r\n\r\ndescribe('TextField', () => {\r\n  function renderIntoDocument(element: React.ReactElement<any>): HTMLElement {\r\n    const component = ReactTestUtils.renderIntoDocument(element);\r\n    const renderedDOM: Element = ReactDOM.findDOMNode(component as React.ReactInstance);\r\n    return renderedDOM as HTMLElement;\r\n  }\r\n\r\n  function mockEvent(targetValue: string = ''): React.SyntheticEvent<HTMLElement> {\r\n    const target: EventTarget = { value: targetValue } as HTMLInputElement;\r\n    const event: React.SyntheticEvent<HTMLElement> = { target } as React.SyntheticEvent<HTMLElement>;\r\n    return event;\r\n  }\r\n\r\n  function delay(millisecond: number): Promise<void> {\r\n    return new Promise<void>((resolve) => setTimeout(resolve, millisecond));\r\n  }\r\n\r\n  it('should render label and value to input element', () => {\r\n    const exampleLabel: string = 'this is label';\r\n    const exampleValue: string = 'this is value';\r\n\r\n    const renderedDOM: HTMLElement = renderIntoDocument(\r\n      <TextField\r\n        label={ exampleLabel }\r\n        value={ exampleValue }\r\n        />\r\n    );\r\n\r\n    // Assert on the input element.\r\n    const inputDOM: HTMLInputElement = renderedDOM.getElementsByTagName('input')[0];\r\n    expect(inputDOM.value).to.equal(exampleValue);\r\n    expect(inputDOM.getAttribute('label')).to.equal(exampleLabel);\r\n\r\n    // Assert on the label element.\r\n    const labelDOM: HTMLLabelElement = renderedDOM.getElementsByTagName('label')[0];\r\n    expect(labelDOM.textContent).to.equal(exampleLabel);\r\n  });\r\n\r\n  it('should render multiline as text area element', () => {\r\n    const renderedDOM: HTMLElement = renderIntoDocument(\r\n      <TextField value='This\\nIs\\nMultiline\\nText\\n' multiline />\r\n    );\r\n\r\n    // Assert on the input element.\r\n    const inputDOM: HTMLTextAreaElement = renderedDOM.getElementsByTagName('textarea')[0];\r\n    expect(inputDOM.value).not.be.be.empty;\r\n  });\r\n\r\n  it('should associate the label and input box', () => {\r\n    const renderedDOM: HTMLElement = renderIntoDocument(\r\n      <TextField\r\n        label='text-field-label'\r\n        value='whatever value'\r\n        />\r\n    );\r\n\r\n    const inputDOM: HTMLInputElement = renderedDOM.getElementsByTagName('input')[0];\r\n    const labelDOM: HTMLLabelElement = renderedDOM.getElementsByTagName('label')[0];\r\n\r\n    // Assert the input ID and label FOR attribute are the same.\r\n    expect(inputDOM.id).to.not.be.empty;\r\n    expect(inputDOM.id).to.equal(labelDOM.htmlFor);\r\n  });\r\n\r\n  it('should render a disabled input element', () => {\r\n    const renderedDOM: HTMLElement = renderIntoDocument(\r\n      <TextField disabled={ true } />\r\n    );\r\n\r\n    // Assert the input box is disabled.\r\n    const inputDOM: HTMLInputElement = renderedDOM.getElementsByTagName('input')[0];\r\n    expect(inputDOM.disabled).to.equal(true);\r\n  });\r\n\r\n  describe('error message', () => {\r\n    const errorMessage: string = 'The string is too long, should not exceed 3 characters.';\r\n\r\n    function assertErrorMessage(renderedDOM: HTMLElement, expectedErrorMessage: string | boolean): void {\r\n      const errorMessageDOM: HTMLElement =\r\n        renderedDOM.querySelector('[data-automation-id=error-message]') as HTMLElement;\r\n\r\n      if (expectedErrorMessage === false) {\r\n        expect(errorMessageDOM).to.be.null; // element not exists\r\n      } else {\r\n        expect(errorMessageDOM.textContent).to.equal(expectedErrorMessage);\r\n      }\r\n    }\r\n\r\n    it('should render error message when onGetErrorMessage returns a string', () => {\r\n      function validator(value: string): string {\r\n        return value.length > 3 ? errorMessage : '';\r\n      }\r\n\r\n      const renderedDOM: HTMLElement = renderIntoDocument(\r\n        <TextField\r\n          label='text-field-label'\r\n          value='whatever value'\r\n          onGetErrorMessage={ validator }\r\n          />\r\n      );\r\n\r\n      const inputDOM: HTMLInputElement = renderedDOM.getElementsByTagName('input')[0];\r\n      ReactTestUtils.Simulate.change(inputDOM, mockEvent('the input value'));\r\n\r\n      // The value is delayed to validate, so it must to query error message after a while.\r\n      return delay(250).then(() => assertErrorMessage(renderedDOM, errorMessage));\r\n    });\r\n\r\n    it('should render error message when onGetErrorMessage returns a Promise<string>', () => {\r\n      function validator(value: string): Promise<string> {\r\n        return Promise.resolve(value.length > 3 ? errorMessage : '');\r\n      }\r\n\r\n      const renderedDOM: HTMLElement = renderIntoDocument(\r\n        <TextField\r\n          label='text-field-label'\r\n          value='whatever value'\r\n          onGetErrorMessage={ validator }\r\n          />\r\n      );\r\n\r\n      const inputDOM: HTMLInputElement = renderedDOM.getElementsByTagName('input')[0];\r\n      ReactTestUtils.Simulate.change(inputDOM, mockEvent('the input value'));\r\n\r\n      // The value is delayed to validate, so it must to query error message after a while.\r\n      return delay(250).then(() => assertErrorMessage(renderedDOM, errorMessage));\r\n    });\r\n\r\n    it('should render error message on first render when onGetErrorMessage returns a string', () => {\r\n      const renderedDOM: HTMLElement = renderIntoDocument(\r\n        <TextField\r\n          label='text-field-label'\r\n          value='whatever value'\r\n          onGetErrorMessage={ () => errorMessage }\r\n          />\r\n      );\r\n\r\n      assertErrorMessage(renderedDOM, errorMessage);\r\n    });\r\n\r\n    it('should render error message on first render when onGetErrorMessage returns a Promise<string>', () => {\r\n      const renderedDOM: HTMLElement = renderIntoDocument(\r\n        <TextField\r\n          label='text-field-label'\r\n          value='whatever value'\r\n          onGetErrorMessage={ () => Promise.resolve(errorMessage) }\r\n          />\r\n      );\r\n\r\n      // The Promise based validation need to assert with async pattern.\r\n      return delay(1).then(() => assertErrorMessage(renderedDOM, errorMessage));\r\n    });\r\n\r\n    it('should not render error message when onGetErrorMessage return an empty string', () => {\r\n      const renderedDOM: HTMLElement = renderIntoDocument(\r\n        <TextField\r\n          label='text-field-label'\r\n          value='whatever value'\r\n          onGetErrorMessage={ () => '' }\r\n          />\r\n      );\r\n\r\n      assertErrorMessage(renderedDOM, /* exist */ false);\r\n    });\r\n\r\n    it('should not render error message when no value is provided', () => {\r\n      let actualValue: string = undefined;\r\n\r\n      const renderedDOM: HTMLElement = renderIntoDocument(\r\n        <TextField\r\n          label='text-field-label'\r\n          onGetErrorMessage={ (value: string) => actualValue = value }\r\n          />\r\n      );\r\n\r\n      assertErrorMessage(renderedDOM, /* exist */ false);\r\n      expect(actualValue).to.equal('');\r\n    });\r\n\r\n    it('should update error message when receive new value from props', () => {\r\n      function validator(value: string): string {\r\n        return value.length > 3 ? errorMessage : '';\r\n      }\r\n\r\n      const renderedDOM: HTMLElement = renderIntoDocument(\r\n        <TextField\r\n          value='initial value'\r\n          onGetErrorMessage={ validator }\r\n          />\r\n      );\r\n\r\n      assertErrorMessage(renderedDOM, errorMessage);\r\n\r\n      ReactDOM.render(\r\n        <TextField\r\n          value=''\r\n          onGetErrorMessage={ validator }\r\n          />,\r\n        renderedDOM.parentElement\r\n      );\r\n\r\n      return delay(250).then(() => assertErrorMessage(renderedDOM, /* exist */ false));\r\n    });\r\n  });\r\n\r\n  it('can render a default value', () => {\r\n    const renderedDOM: HTMLElement = renderIntoDocument(\r\n      <TextField\r\n        defaultValue='initial value'\r\n        />\r\n    );\r\n\r\n    expect(renderedDOM.querySelector('input').value).equals('initial value');\r\n  });\r\n\r\n  it('can render a default value as a textarea', () => {\r\n    const renderedDOM: HTMLElement = renderIntoDocument(\r\n      <TextField\r\n        defaultValue='initial value'\r\n        multiline={ true }\r\n        />\r\n    );\r\n\r\n    expect(renderedDOM.querySelector('textarea').value).equals('initial value');\r\n  });\r\n});\r\n"],"sourceRoot":"..\\..\\..\\src"}