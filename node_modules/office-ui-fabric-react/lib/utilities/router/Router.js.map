{"version":3,"sources":["utilities/router/Router.tsx"],"names":[],"mappings":"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","file":"utilities/router/Router.js","sourcesContent":["import * as React from 'react';\r\nimport { EventGroup } from '../eventGroup/EventGroup';\r\n\r\nexport interface IRouterProps {\r\n  replaceState?: boolean;\r\n  children?: React.ReactElement<any>[];\r\n  onNewRouteLoaded?: () => void;\r\n}\r\n\r\nexport interface IRouterState {\r\n  path: string;\r\n}\r\n\r\nexport class Router extends React.Component<IRouterProps, IRouterState> {\r\n  private _events: EventGroup;\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this.state = {\r\n      path: location.hash\r\n    };\r\n    this._events = new EventGroup(this);\r\n  }\r\n\r\n  public componentDidUpdate(prevProps: IRouterProps, prevState: IRouterState) {\r\n\r\n    if (this.state.path !== prevState.path) {\r\n      window.scrollTo(0, 0);\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    return _getComponent(this.state.path, this.props.children);\r\n  }\r\n\r\n  public componentDidMount() {\r\n    this._events.on(window, 'hashchange', () => {\r\n      if (this.state.path !== location.hash) {\r\n        this.setState({ path: location.hash }, () => {\r\n          if (this.props.onNewRouteLoaded) {\r\n            this.props.onNewRouteLoaded();\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    if (this.props.onNewRouteLoaded) {\r\n      this.props.onNewRouteLoaded();\r\n    }\r\n  }\r\n\r\n  public componentWillUnmount() {\r\n    this._events.dispose();\r\n  }\r\n}\r\n\r\nfunction _getComponent(matchPath, children) {\r\n  let path = matchPath;\r\n  if (children && children.$$typeof) {\r\n    children = [ children ];\r\n  }\r\n\r\n  // Check if an in page anchor link was passed to the Url #/example/route#inPageAnchorLink\r\n  if (_hasAnchorLink(path)) {\r\n    // Extract the base path #/example/route - #inPageAnchorLink\r\n    path = _extractRoute(path);\r\n  }\r\n\r\n  for (let i = 0; children && i < children.length; i++) {\r\n    let currentChild = children[i];\r\n\r\n    if (_match(path, currentChild)) {\r\n      let component = currentChild.props.component;\r\n      let childComponent = _getComponent(path, currentChild.props.children);\r\n\r\n      return React.createElement(component, null, childComponent);\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction _hasAnchorLink(path) {\r\n  return (path.match(/#/g) || []).length > 1;\r\n}\r\n\r\n/*\r\n  Extract the route from the URL minus the in page anchor link\r\n  Example URL #/example/route#inPageAnchorLink\r\n  Returns #/example/route\r\n*/\r\nfunction _extractRoute(path) {\r\n  let index = path.lastIndexOf('#');\r\n  if (index >= 0) {\r\n    path = path.substr(0, index);\r\n  }\r\n  return path;\r\n}\r\n\r\nfunction _match(currentPath, child): boolean {\r\n  if (child.props) {\r\n    let { path } = child.props;\r\n\r\n    path = path || '';\r\n    currentPath = currentPath || '';\r\n\r\n    return (\r\n      (!path) ||\r\n      (path.toLowerCase() === currentPath.toLowerCase())\r\n    );\r\n  }\r\n\r\n  return false;\r\n}\r\n"],"sourceRoot":"..\\..\\..\\src"}