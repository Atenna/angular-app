{"version":3,"sources":["common/BaseComponent.test.tsx"],"names":[],"mappings":";;;;;;AAAA,uCAAuC;AACvC,IAAY,KAAK,WAAM,OAAO,CAAC,CAAA;AAC/B,sCAAsC;AAEtC,IAAY,cAAc,WAAM,yBAAyB,CAAC,CAAA;AAC1D,8BAA8B,iBAAiB,CAAC,CAAA;AAE1C,wBAAM,EAAE,oBAAM,CAAU;AAE9B,IAAI,gBAAgB,GAAG,6BAAa,CAAC,OAAO,CAAC;AAE7C;IAA4B,iCAAqB;IAAjD;QAA4B,8BAAqB;IAyCjD,CAAC;IAvCQ,0CAAkB,GAAzB;QACE,IAAI,CAAC,cAAc,EAAE,CAAC;IACxB,CAAC;IAEM,yCAAiB,GAAxB;QACE,IAAI,CAAC,cAAc,EAAE,CAAC;IACxB,CAAC;IAEM,6CAAqB,GAA5B;QACE,IAAI,CAAC,cAAc,EAAE,CAAC;IACxB,CAAC;IAEM,2CAAmB,GAA1B;QACE,IAAI,CAAC,cAAc,EAAE,CAAC;IACxB,CAAC;IAEM,iDAAyB,GAAhC;QACE,IAAI,CAAC,cAAc,EAAE,CAAC;IACxB,CAAC;IAEM,8BAAM,GAAb;QACE,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAEM,0CAAkB,GAAzB;QACE,IAAI,CAAC,cAAc,EAAE,CAAC;IACxB,CAAC;IAEM,4CAAoB,GAA3B;QACE,IAAI,CAAC,cAAc,EAAE,CAAC;IACxB,CAAC;IAEO,sCAAc,GAAtB;QACE,IAAI,GAAG,GAAe,IAAI,CAAC;QAE3B,iBAAiB;QACjB,GAAG,EAAE,CAAC;IACR,CAAC;IACH,oBAAC;AAAD,CAzCA,AAyCC,CAzC2B,6BAAa,GAyCxC;AAED,QAAQ,CAAC,eAAe,EAAE;IACxB,SAAS,CAAC;QACR,6BAAa,CAAC,OAAO,GAAG,gBAAgB,CAAC;IAC3C,CAAC,CAAC,CAAC;IAEH,aAAa,CAAC,oBAAoB,CAAC,CAAC;IACpC,aAAa,CAAC,mBAAmB,CAAC,CAAC;IACnC,aAAa,CAAC,uBAAuB,CAAC,CAAC;IACvC,aAAa,CAAC,qBAAqB,CAAC,CAAC;IACrC,aAAa,CAAC,2BAA2B,CAAC,CAAC;IAC3C,aAAa,CAAC,QAAQ,CAAC,CAAC;IACxB,aAAa,CAAC,oBAAoB,CAAC,CAAC;IACpC,aAAa,CAAC,sBAAsB,CAAC,CAAC;IAEtC,EAAE,CAAC,kBAAkB,EAAE;QACrB;YAAkB,uBAAqB;YAAvC;gBAAkB,8BAAqB;YAMvC,CAAC;YAHQ,oBAAM,GAAb;gBACE,MAAM,CAAC,qBAAC,GAAG,IAAC,GAAG,EAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAG,EAAG,CAAC;YAClD,CAAC;YACH,UAAC;QAAD,CANA,AAMC,CANiB,6BAAa,GAM9B;QAED,IAAI,SAAS,GAAG,cAAc,CAAC,kBAAkB,CAC/C,oBAAC,GAAG,OAAG,CACD,CAAC;QAET,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC;IAClC,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC;AAEH,uBAAuB,UAAU;IAC/B,EAAE,CAAC,+BAA6B,UAAU,eAAY,EAAE;QACtD,IAAI,gBAAgB,GAAG,IAAI,CAAC;QAE5B,6BAAa,CAAC,OAAO,GAAG,UAAC,YAAY,EAAE,EAAE,IAAK,OAAA,gBAAgB,GAAG,YAAY,EAA/B,CAA+B,CAAC;QAE9E,IAAI,CAAC,GAAG,IAAI,aAAa,EAAE,CAAC;QAE5B,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC;QAEhB,MAAM,CAAC,gBAAgB,KAAK,IAAI,EAAE,2BAA2B,CAAC,CAAC;IACjE,CAAC,CAAC,CAAC;AACL,CAAC","file":"common/BaseComponent.test.js","sourcesContent":["/* tslint:disable:no-unused-variable */\r\nimport * as React from 'react';\r\n/* tslint:enable:no-unused-variable */\r\n\r\nimport * as ReactTestUtils from 'react-addons-test-utils';\r\nimport { BaseComponent } from './BaseComponent';\r\n\r\nlet { assert, expect } = chai;\r\n\r\nlet _originalOnError = BaseComponent.onError;\r\n\r\nclass TestComponent extends BaseComponent<{}, {}> {\r\n\r\n  public componentWillMount(): void {\r\n    this._createNullRef();\r\n  }\r\n\r\n  public componentDidMount(): void {\r\n    this._createNullRef();\r\n  }\r\n\r\n  public shouldComponentUpdate(): void {\r\n    this._createNullRef();\r\n  }\r\n\r\n  public componentWillUpdate(): void {\r\n    this._createNullRef();\r\n  }\r\n\r\n  public componentWillReceiveProps(): void {\r\n    this._createNullRef();\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    this._createNullRef();\r\n    return null;\r\n  }\r\n\r\n  public componentDidUpdate(): void {\r\n    this._createNullRef();\r\n  }\r\n\r\n  public componentWillUnmount(): void {\r\n    this._createNullRef();\r\n  }\r\n\r\n  private _createNullRef() {\r\n    let foo: () => void = null;\r\n\r\n    // Calling a null\r\n    foo();\r\n  }\r\n}\r\n\r\ndescribe('BaseComponent', () => {\r\n  afterEach(() => {\r\n    BaseComponent.onError = _originalOnError;\r\n  });\r\n\r\n  _buildTestFor('componentWillMount');\r\n  _buildTestFor('componentDidMount');\r\n  _buildTestFor('shouldComponentUpdate');\r\n  _buildTestFor('componentWillUpdate');\r\n  _buildTestFor('componentWillReceiveProps');\r\n  _buildTestFor('render');\r\n  _buildTestFor('componentDidUpdate');\r\n  _buildTestFor('componentWillUnmount');\r\n\r\n  it('can resolve refs', () => {\r\n    class Foo extends BaseComponent<{}, {}> {\r\n      public root: HTMLElement;\r\n\r\n      public render() {\r\n        return <div ref={ this._resolveRef('root') } />;\r\n      }\r\n    }\r\n\r\n    let component = ReactTestUtils.renderIntoDocument(\r\n      <Foo />\r\n    ) as any;\r\n\r\n    expect(component.root).to.exist;\r\n  });\r\n});\r\n\r\nfunction _buildTestFor(methodName) {\r\n  it(`calls the error logger on ${methodName} exception`, () => {\r\n    let lastErrorMessage = null;\r\n\r\n    BaseComponent.onError = (errorMessage, ex) => lastErrorMessage = errorMessage;\r\n\r\n    let c = new TestComponent();\r\n\r\n    c[methodName]();\r\n\r\n    assert(lastErrorMessage !== null, 'Error callback not called');\r\n  });\r\n}"],"sourceRoot":"..\\..\\src"}